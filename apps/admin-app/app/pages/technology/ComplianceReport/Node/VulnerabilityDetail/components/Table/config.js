import { Button, Tag } from 'antd';

import moment from 'moment';

import { getLocalDateFormat } from '@shared/utils/localization';

export const tableColumns = ({ t }) => [
  {
    title: t('SEVERITY_LEVEL'),
    dataIndex: 'severityLevel',
    key: 'severityLevel',
    width: 75,
    render: severityLevel => {
      const tagStyles = { fontSize: 10, lineHeight: '15px', marginRight: 4 };
      if (severityLevel === 'critical') return <Tag color="volcano" style={tagStyles}>{t('CRITICAL')}</Tag>;
      if (severityLevel === 'high') return <Tag color="error" style={tagStyles}>{t('HIGH')}</Tag>;
      if (severityLevel === 'moderate') return <Tag color="warning" style={tagStyles}>{t('MODERATE')}</Tag>;
      if (severityLevel === 'low') return <Tag color="default" style={tagStyles}>{t('LOW')}</Tag>;
      return severityLevel;
    },
  },
  {
    title: t('MODULE'),
    dataIndex: 'module',
    key: 'module',
  },
  {
    title: t('TITLE'),
    dataIndex: 'title',
    key: 'title',
  },
  {
    title: t('PATH'),
    dataIndex: 'path',
    key: 'path',
  },
  {
    title: t('MORE_INFO'),
    dataIndex: 'url',
    key: 'url',
    width: 100,
    render: url => (
      <a href={url}>
        <Button size="small">{t('LINK')}</Button>
      </a>
    ),
  },
  {
    title: t('REPORTED_AT'),
    dataIndex: 'reportedAt',
    key: 'reportedAt',
    width: 125,
    render: reportedAt => moment(reportedAt).format(getLocalDateFormat()),
  },
];
