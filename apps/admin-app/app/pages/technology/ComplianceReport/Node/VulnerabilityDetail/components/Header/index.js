import { PageHeader, Col, Row } from 'antd';
import { useTranslation } from 'react-i18next';
import { useSelector } from 'react-redux';

import { vulnerabilitiesSelector } from '@app/pages/technology/ComplianceReport/Node/VulnerabilityDetail/redux/selectors';

const Header = () => {
  const { t } = useTranslation('technologyComplianceReport');

  const vulnerabilities = useSelector(vulnerabilitiesSelector.getData);
  const vulnerabilitiesPending = useSelector(vulnerabilitiesSelector.isPending);

  let title = t('global:PAGE_TITLE.COMPLIANCE_REPORT.NODE.VULNERABILITY_DETAILS');
  /*
   * not ideal to get the repository name this way, since it doesn't work if there aren't any vulnerabilities
   * but there's no separate endpoint to get just a single repository by its id
   */
  if (!vulnerabilitiesPending && vulnerabilities.length) title = `${title} - ${vulnerabilities[0].repositoryName}`;

  return (
    <Row>
      <Col flex={1}>
        <PageHeader
          className="p-0 page-title"
          title={title}
        />
      </Col>
    </Row>
  );
};

export default Header;
